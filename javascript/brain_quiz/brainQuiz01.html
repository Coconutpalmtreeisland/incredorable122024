<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>무슨 사진일까?</title>
  <link rel="stylesheet" href="assets/css/quiz.css">
</head>

<body>
  <div class="quiz__bg">
    <aside class="aside__left">
      <div class="container">
        <header class="timer">
          <img src="assets/img/timer.png" alt="타이머" style="width: 50px;">
          <div class="timer__num">
            <h1 id="timer">10</h1> <!-- 10초 설정 -->
            <script src="timer_script.js"></script>
          </div>
        </header>
        <footer class="user_info">
          <div class="user__name">기본이</div>
          <div class="user__age">21세</div>
          <div class="user__char">
            <img src="assets/img/default character.png" alt="기본 캐릭터" style="width: 50px;">
          </div>
        </footer>
      </div>
    </aside>
    <aside class="aside__right">
      <div class="container">
        <div class="aside__text">두뇌메달</div>
        <div class="aside__medal">
          <img src="assets/img/bronze_medal.png" alt="메달" style="width: 50px;">
        </div>
      </div>
    </aside>
    <main class="main">
      <div class="quiz__wrap"></div>
    </main>
  </div>
  <!-- main -->

  <script>
    // 선택자
    const quizWrap = document.querySelector(".quiz__wrap");

    // 문제 정보
    const quizInfo = [
      {
        imagePaths: 'assets/img/banana-min.jpg',
        imgAlt: '바나나',
        infoChoice: ["사과", "바나나", "딸기", "오렌지"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/bycicle-min.jpg',
        imgAlt: '자전거',
        infoChoice: ["킥보드", "오토바이", "자전거", "자동차"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/cacao-min.jpg',
        imgAlt: '카카오',
        infoChoice: ["커피", "땅콩", "카카오", "호두"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/candy-min.jpg',
        imgAlt: '사탕',
        infoChoice: ["초콜릿", "사탕", "젤리", "달고나"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/cap-min.jpg',
        imgAlt: '모자',
        infoChoice: ["신발", "치마", "가방", "모자 "],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/cap-min.jpg',
        imgAlt: '모자',
        infoChoice: ["신발", "치마", "가방", "모자 "],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/cat-min.jpg',
        imgAlt: '고양이',
        infoChoice: ["강아지", "오리", "고양이", "비버"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/chicken-min.jpg',
        imgAlt: '닭',
        infoChoice: ["다람쥐", "고양이", "공작", "닭 "],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/clock-min.jpg',
        imgAlt: '시계',
        infoChoice: ["시계", "귀걸이", "목걸이", "핸드폰"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/clown-min.jpg',
        imgAlt: '광대',
        infoChoice: ["뱀파이어", "광대", "처녀귀신", "좀비"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/colorPencil-min.jpg',
        imgAlt: '색연필',
        infoChoice: ["크레파스", "색연필", "물감", "싸인펜"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/cumputer-min.jpg',
        imgAlt: '컴퓨터',
        infoChoice: ["핸드폰", "태블릿", "라디오", "컴퓨터"],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/dog-min.jpg',
        imgAlt: '강아지',
        infoChoice: ["오리", "수달", "강아지", "쿼카"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/garlic-min.jpg',
        imgAlt: '마늘',
        infoChoice: ["생강", "마늘", "팔각", "카다멈"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/glasses-min.jpg',
        imgAlt: '안경',
        infoChoice: ["돋보기", "현미경", "선글라스", "안경"],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/grapefruit-min.jpg',
        imgAlt: '자몽',
        infoChoice: ["자몽", "오렌지", "레몬", "용과"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/horse-min.jpg',
        imgAlt: '말',
        infoChoice: ["오리", "말", "호랑이", "고양이"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/kimchi-min.jpg',
        imgAlt: '김치',
        infoChoice: ["김치", "배추", "깍두기", "동치미"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/kingSejong-min.jpg',
        imgAlt: '세종대왕',
        infoChoice: ["이순신", "세종대왕", "유관순", "김구"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/lake-min.jpg',
        imgAlt: '호수',
        infoChoice: ["바다", "하늘", "호수", "계곡"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/library-min.jpg',
        imgAlt: '도서관',
        infoChoice: ["도서관", "병원", "백화점", "공원"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/pig-min.jpg',
        imgAlt: '돼지',
        infoChoice: ["소", "토끼", "돼지", "말"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/pizza-min.jpg',
        imgAlt: '피자',
        infoChoice: ["피자", "떡볶이", "탕수육", "닭갈비"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/platypus-min.jpg',
        imgAlt: '오리너구리',
        infoChoice: ["악어", "비버", "수달", "오리너구리"],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/quokka-min.jpg',
        imgAlt: '쿼카',
        infoChoice: ["쿼카", "강아지", "수달", "캥거루"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/Rhinoceros-min.jpg',
        imgAlt: '코뿔소',
        infoChoice: ["기린", "코뿔소", "코끼리", "말"],
        infoAnswer: 2,
      },
      {
        imagePaths: 'assets/img/soap-min.jpg',
        imgAlt: '비누',
        infoChoice: ["샴푸", "초콜릿", "대리석", "비누"],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/squirrel-min.jpg',
        imgAlt: '다람쥐',
        infoChoice: ["다람쥐", "말", "청설모", "수달"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/sunflower-min.jpg',
        imgAlt: '해바라기',
        infoChoice: ["레몬", "러버덕", "해바라기", "민들레"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/tanghulu-min.jpg',
        imgAlt: '탕후루',
        infoChoice: ["탕후루", "닭꼬치", "사탕", "딸기"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/themaPark-min.jpg',
        imgAlt: '놀이공원',
        infoChoice: ["박물관", "워터파크", "미술관", "놀이공원"],
        infoAnswer: 4,
      },
      {
        imagePaths: 'assets/img/tiger-min.jpg',
        imgAlt: '호랑이',
        infoChoice: ["호랑이", "고양이", "강아지", "닭"],
        infoAnswer: 1,
      },
      {
        imagePaths: 'assets/img/tissue-min.jpg',
        imgAlt: '휴지',
        infoChoice: ["도화지", "말", "휴지", "달걀"],
        infoAnswer: 3,
      },
      {
        imagePaths: 'assets/img/waterPark-min.jpg',
        imgAlt: '워터파크',
        infoChoice: ["계곡", "호수", "워터파크", "놀이공원"],
        infoAnswer: 3,
      },
    ];

    let currentIndex = 0;  // 현재 문제 변수 값(현재 풀고 있는 값)

    // 문제출력
    const updateQuiz = (index) => {
      let quizWrapTag = `
        <div class="quiz">
          <div class="quiz__header">무슨 사진일까?</div>
          <div class="quiz__main">
            <div class="quiz__img">
              <iframe src="${quizInfo[index].imagePaths}" frameborder="0" border="0" cellspacing="0" style="border-style: none;width: 100%; height: 120px;"></iframe>
            </div>
            <div class="quiz__choice" style="margin: 200px 50%">
              <label for="choice1">
                <button id="choice1" name="choice" value="1">
                  <span>${quizInfo[index].infoChoice[0]}</span>
                </button>
              </label>
              <label for="choice2">
                <button id="choice2" name="choice" value="2">
                  <span>${quizInfo[index].infoChoice[1]}</span>
                </button>
              </label>
              <label for="choice3">
                <button id="choice3" name="choice" value="3">
                  <span>${quizInfo[index].infoChoice[2]}</span>
                </button>
              </label>
              <label for="choice4">
                <button id="choice4" name="choice" value="4">
                  <span>${quizInfo[index].infoChoice[3]}</span>
                </button>
              </label>
            </div>
            <div class="quiz__answer none">${quizInfo[index].infoAnswer}</div>
          </div>
        </div>
      `;
      quizWrap.innerHTML = quizWrapTag;
    }

    // 정답 확인
    const checkAnswer = () => {
      const selectedChoice = quizWrap.querySelector("button[name='choice']:checked");

      if (!selectedChoice) {
        return; // 선택한 답이 없으면 함수 종료
      }

      const userAnswer = selectedChoice.value;                    // 사용자가 클릭한 정답
      const corrcetAnswer = quizInfo[currentIndex].infoAnswer.toString();   // 정답지의 정답
      const quizElement = quizWrap.querySelector(".quiz");

      if (userAnswer === corrcetAnswer) {
        quizElement.classList.add("good");
      } else {
        quizElement.classList.add("bad");
      }
    };

    // 다음 문제로 넘어가는 함수
    function nextQuestion() {
      if (currentIndex < quizInfo.length - 1) {
        currentIndex++;
        // 다음 문제로 넘어갈 때 문제 업데이트
        updateQuiz(currentIndex);
      } else {
        alert("퀴즈가 종료되었습니다.");
      }
    }

    // 페이지가 로드된 후 실행
    document.addEventListener("DOMContentLoaded", () => {
      updateQuiz(currentIndex);

      // 보기가 클릭될 때 다음 문제로 넘어감
      const buttons = document.querySelectorAll(".quiz__choice button");
      buttons.forEach((button) => {
        button.addEventListener("click", () => {
          nextQuestion();
          checkAnswer();
        });
      });
    });
  </script>
</body>

</html>